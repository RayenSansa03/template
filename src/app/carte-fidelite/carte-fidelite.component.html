<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../../assets/images/apple-touch-icon.png"
    />
    <link rel="shortcut icon" href="../../assets/images/favicon.png" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <meta charSet="utf-8" />
    <title>Gestion des Tâches</title>
    <meta name="description" content="Application de gestion des tâches" />
    <meta name="keywords" content="Gestion, Tâches, Angular, .NET" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <meta name="next-head-count" content="5" />
    <link
      rel="preload"
      href="/_next/static/css/6d5ec1825ef0b9a5.css"
      as="style"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/6d5ec1825ef0b9a5.css"
      data-n-g=""
    />
  </head>
  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <app-expbar2></app-expbar2>

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->
          <app-expbar></app-expbar>

          <div class="content-wrapper">
            <!-- Content -->
            <div class="container-xxl flex-grow-1 container-p-y">
              <div class="row">
                <div class="col-12">
                  <h2>Liste des tâches</h2>

                  <!-- Liste des tâches -->
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Description</th>
                        <th>État</th>
                        <th>Date de Création</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let todo of listeToDos">
                        <td>{{ todo.description }}</td>
                        <td>{{ todo.etat }}</td>
                        <td>{{ todo.dateCreation | date : "shortDate" }}</td>
                        <td>
                          <button
                            (click)="editToDo(todo)"
                            class="btn btn-primary"
                          >
                            Modifier
                          </button>
                          <button
                            (click)="deleteToDo(todo.idL)"
                            class="btn btn-danger"
                          >
                            Supprimer
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <hr />

                  <!-- Formulaire d'ajout/modification de tâche -->
                  <!-- Formulaire d'ajout/modification de tâche -->
                  <!-- Formulaire d'ajout/modification de tâche -->
                  <h3>
                    {{
                      isEditing
                        ? "Modifier la tâche"
                        : "Ajouter une nouvelle tâche"
                    }}
                  </h3>
                  <form (ngSubmit)="saveToDo()">
                    <div class="mb-3">
                      <label for="description" class="form-label"
                        >Description</label
                      >
                      <input
                        type="text"
                        id="description"
                        [(ngModel)]="selectedToDo.description"
                        name="description"
                        class="form-control"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="etat" class="form-label">État</label>
                      <select
                        id="etat"
                        [(ngModel)]="selectedToDo.etat"
                        name="etat"
                        class="form-control"
                        required
                      >
                        <option value="" disabled>Choisissez l'état</option>
                        <option value="à faire">À faire</option>
                        <option value="en cours">En cours</option>
                        <option value="terminé">Terminé</option>
                      </select>
                      <!-- Message d'erreur pour l'état -->
                      <div *ngIf="showError" class="text-danger mt-2">
                        {{ errorMessage }}
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="dateCreation" class="form-label"
                        >Date de Création</label
                      >
                      <input
                        type="date"
                        id="dateCreation"
                        [(ngModel)]="selectedToDo.dateCreation"
                        name="dateCreation"
                        class="form-control"
                        required
                      />
                    </div>
                    <button type="submit" class="btn btn-success">
                      {{
                        isEditing
                          ? "Enregistrer les modifications"
                          : "Ajouter la tâche"
                      }}
                    </button>
                    <button
                      type="button"
                      (click)="resetForm()"
                      class="btn btn-secondary"
                    >
                      Annuler
                    </button>
                  </form>
                </div>
              </div>
            </div>
            <!-- / Content -->

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div
                class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column"
              >
                <div class="mb-2 mb-md-0">
                  ©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with ❤️ by
                  <a
                    href="https://themeselection.com"
                    target="_blank"
                    class="footer-link fw-bolder"
                    >ThemeSelection</a
                  >
                </div>
                <div>
                  <a
                    href="https://themeselection.com/license/"
                    class="footer-link me-4"
                    target="_blank"
                    >License</a
                  >
                  <a
                    href="https://themeselection.com/"
                    target="_blank"
                    class="footer-link me-4"
                    >More Themes</a
                  >
                  <a
                    href="https://themeselection.com/demo/sneat-bootstrap-html-admin-template/documentation/"
                    target="_blank"
                    class="footer-link me-4"
                    >Documentation</a
                  >
                  <a
                    href="https://github.com/themeselection/sneat-html-admin-template-free/issues"
                    target="_blank"
                    class="footer-link me-4"
                    >Support</a
                  >
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

    <div class="buy-now">
      <a
        href="https://themeselection.com/products/sneat-bootstrap-html-admin-template/"
        target="_blank"
        class="btn btn-danger btn-buy-now"
        >Contactez-nous</a
      >
    </div>

    <script>
      // Scripts supplémentaires si nécessaire
    </script>
  </body>
</html>
